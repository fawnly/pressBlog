(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{369:function(e,s,a){"use strict";a.r(s);var t=a(33),r=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"flutter构建android-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#flutter构建android-app"}},[e._v("#")]),e._v(" Flutter构建Android APP")]),e._v(" "),a("blockquote",[a("p",[e._v("在完成项目开发后,我们就想要将我们的代码打包成一个apk的包,以提供给别人使用.")])]),e._v(" "),a("h2",{attrs:{id:"创建密钥库-keystore"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建密钥库-keystore"}},[e._v("#")]),e._v(" 创建密钥库 keystore")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("keytool -genkey -v -keystore ~/key.jks -keyalg RSA -keysize 2048 -validity 10000 -alias key\n")])])]),a("p",[e._v("上面的操作会要求我们输入两次密码后再让我们填写一些基本信息.\n不想填写的信息,我们可以直接回车跳过,最后出现")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Is CN=Unknown, OU=Unknown, O=Unknown, L=Unknown, ST=Unknown, C=Unknown correct?\n  [no]: \n")])])]),a("p",[e._v("我们直接按"),a("code",[e._v("y")]),e._v("就可以了.然后又要求我们输入密钥密码,我们可以直接回车设置成和密钥库一样的密码.最后出现如下:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[Storing /Users/xxx/key.jks]\n")])])]),a("p",[e._v("就证明密钥库已经生成成功了,并且上面的就是文件所在的路径.")]),e._v(" "),a("p",[a("strong",[e._v("注意:")]),e._v(" 此文件需要保密,不要将其放到github等上面去")]),e._v(" "),a("h2",{attrs:{id:"引用keystore"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引用keystore"}},[e._v("#")]),e._v(" 引用keystore")]),e._v(" "),a("p",[e._v("在android目录下创建一个名为"),a("code",[e._v("key.properties")]),e._v("的文件,里面包含对keystore的引用:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("storePassword=123456\nkeyPassword=123456\nkeyAlias=key\nstoreFile=/Users/xxx/key.jks\n")])])]),a("ul",[a("li",[e._v("storeFile的路径是密钥库的路径,就是我们之前生成的路径")]),e._v(" "),a("li",[e._v("keyAlias是别名,在我们第一步命令的时候赋予")]),e._v(" "),a("li",[e._v("keyPassword和storePassword就是密钥和密钥库的密码了,我们前面也设置了")])]),e._v(" "),a("h2",{attrs:{id:"配置签名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置签名"}},[e._v("#")]),e._v(" 配置签名")]),e._v(" "),a("p",[e._v("编辑"),a("code",[e._v("android/app/build.gradle")]),e._v("文件为应用配置签名")]),e._v(" "),a("ul",[a("li",[e._v("替换")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("android {\n")])])]),a("p",[e._v("变成:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('def keystorePropertiesFile = rootProject.file("key.properties")\ndef keystoreProperties = new Properties()\nkeystoreProperties.load(new FileInputStream(keystorePropertiesFile))\n\nandroid {\n')])])]),a("hr"),e._v(" "),a("ul",[a("li",[e._v("替换")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("buildTypes {\n    release {\n        // TODO: Add your own signing config for the release build.\n        // Signing with the debug keys for now, so `flutter run --release` works.\n        signingConfig signingConfigs.debug\n    }\n}\n")])])]),a("p",[e._v("变成:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("signingConfigs {\n    release {\n        keyAlias keystoreProperties['keyAlias']\n        keyPassword keystoreProperties['keyPassword']\n        storeFile file(keystoreProperties['storeFile'])\n        storePassword keystoreProperties['storePassword']\n    }\n}\nbuildTypes {\n    release {\n        signingConfig signingConfigs.release\n    }\n}\n")])])]),a("h2",{attrs:{id:"构建apk包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建apk包"}},[e._v("#")]),e._v(" 构建apk包")]),e._v(" "),a("p",[e._v("在项目目录下运行")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("flutter build apk\n")])])]),a("p",[e._v("当看到类似如下这样的提示,则表示已经构建成功,并且告诉了我们构建成功的apk的路径.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Running Gradle task 'assembleRelease'...            \nRunning Gradle task 'assembleRelease'... Done   59.8s\n✓ Built build/app/outputs/apk/release/app-release.apk (16.1MB).\n")])])]),a("p",[e._v("自此,我们的项目构建就完成了,我们可以将包发给别人安装或者提交到应用商店.")])])}),[],!1,null,null,null);s.default=r.exports}}]);